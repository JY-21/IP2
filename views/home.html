<!DOCTYPE html>
<html>
    <head>
        <title>ErRun: Home</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <link rel="stylesheet" href="styles.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    </head>
    <script src="script.js"></script>
    <body>
        <!--Side menu-->
        <aside class="side-menu">
            <div class="side-container">
                <ul>
                    <li><button onClick="newTask()">New Task</button></li>
                    <li><button onClick="deleteTask()">Delete Task</button></li>
                    <li><button onClick="editTask()">Edit Task</button></li>
                </ul>
            </div>
        </aside>

        <!--Top header-->
       <header class="top-header">
            <button onClick="goToProfile()">
                <img src="/profilepic.jpg" alt="Profile Picture" class="profile-pic">
            </button>
       </header>

        <main class="main-content">
            <h1>Current Tasks:</h1>
            <button id="newTaskBtn" class="new-task-btn">+ New Task</button>

            <!--Task list container-->
            <div id="taskList" class="task-list">

            </div>
        </main>

        <div id="taskModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                <span id="closeModal" class="close">&times;</span>
                <h2>Add Task</h2>
                </div>

                <div class="modal-body">
                <form id="taskForm" class="task-form-grid">
                    <input type="hidden" id="taskId" name="taskId">

                    <div>
                    <label for="taskTitle">Task Name:</label>
                    <input type="text" id="taskTitle" name="title" required>
                    </div>

                    <div>
                        <label for="taskCategory">Category:</label>
                        <select id="taskCategory" name="category" required>
                            <option value="">--Select Category--</option>
                            <option value="Bills">Bills</option>
                            <option value="Groceries">Groceries</option>
                            <option value="Delivery">Delivery</option>
                            <option value="Others">Others</option>
                        </select>
                    </div>

                    <div class="full-width">
                    <label for="taskRemarks">Remarks (Optional):</label>
                    <textarea id="taskRemarks" name="remarks"></textarea>
                    </div>

                    <div>
                    <label for="taskOrigin">Point of Origin:</label>
                    <input type="text" id="taskOrigin" name="origin" placeholder="Your starting location" required>
                    </div>

                    <div>
                    <label for="taskDestination">Destination:</label>
                    <input type="text" id="taskDestination" name="destination" placeholder="Where you need to go" required>
                    </div>


                    <div>
                        <label for="taskDeadline">Deadline:</label>
                        <input type="date" id="taskDeadline" name="deadline" required>
                    </div>

                </form>
                </div>

                <div class="modal-footer">
                <button type="submit" form="taskForm" class="save-btn">Save Task</button>
                </div>
            </div>
        </div>


        <!-- Delete Confirmation Modal -->
        <div id="deleteModal" class="modal">
            <div class="delete-modal-content">
                <div class="delete-modal-header">Confirm Delete</div>
                <div class="delete-modal-body">
                <p>Are you sure you want to delete this task?</p>
                </div>
                <div class="delete-modal-footer">
                <button id="cancelDeleteBtn" class="cancel-btn">Cancel</button>
                <button id="confirmDeleteBtn" class="delete-btn">Delete</button>
                </div>
            </div>
        </div>
    
        <!--Map Modal for Route Selection-->
        <div id="mapModal" class="modal">
            <div class="modal-content" style="max-width: 90%; height: 80%">
                <div class="modal-header">
                    <span id="closeMapModal" class="close">&times;</span>
                    <h2>Select Route Locations</h2>
                </div>
                <div class="modal-body" style="height: calc(100% - 120px); display: flex; flex-direction: column;">
                    <div class="map-controls">
                        <div class="location-inputs">
                            <div class="input-group">
                                <label for="originSearch">Origin:</label>
                                <input type="text" id="originSearch" placeholder="Search for origin location...">
                                <button id="useCurrentLocation" class="current-location-btn">üìç</button>
                            </div>
                            <div class="input-group">
                                <label for="destinationSearch">Destination:</label>
                                <input type="text" id="destinationSearch" placeholder="Search for destination location...">
                            </div>
                        </div>
                        <div class="map-buttons">
                            <button id="searchLocations" class="search-btn">Search Locations</button>
                            <button id="generateRoute" class="route-btn" disabled>Generate Route</button>
                            <button id="saveRoute" class="save-btn" disabled>Save Route</button>
                        </div>
                    </div>
                    <div id="routeMap" style="flex: 1; margin-top: 15px; border: 1px solid #ccc; border-radius: 4px;"></div>
                    <div id="routeInfo" class="route-info" style="display:none;">
                        <h3>Route Information</h3>
                        <p><strong>Distance:</strong> <span id="routeDistance">-</span></p>
                        <p><strong>Duration:</strong> <span id="routeDuration">-</span></p>
                        <p><strong>Origin:</strong> <span id="selectedOrigin">-</span></p>
                        <p><strong>Destination:</strong> <span id="selectedDestination">-</span></p>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>