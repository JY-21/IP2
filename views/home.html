<!DOCTYPE html>
<html>
    <head>
        <title>ErRun: Home</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <link rel="stylesheet" href="styles.css">
        <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
        <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    </head>
    <script src="script.js"></script>
    
    <body>
        <!--Side menu-->
        <aside class="side-menu">
            <div class="side-container">
                <!-- Logo Section -->
                <div class="logo-section">
                    <img src="ErRuns logo.png" alt="ErRun Logo" class="company-logo">
                    <h2 class="app-name">ErRuns</h2>
                </div>

                <!-- Navigation Menu -->
                <nav class="nav-menu">
                    <ul>
                        <li class="nav-item active">
                            <a href="home.html">
                                <span class="nav-icon">üè†</span>
                                <span class="nav-text">Home</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="history.html">
                                <span class="nav-icon">üìú</span>
                                <span class="nav-text">Task History</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="profile.html">
                                <span class="nav-icon">üë§</span>
                                <span class="nav-text">Profile</span>
                            </a>
                        </li>
                    </ul>
                </nav>

                <!-- Logout Button at Bottom -->
                <div class="logout-section">
                    <button id="logoutBtn" class="logout-btn">
                        <span class="nav-icon">üö™</span>
                        <span class="nav-text">Logout</span>
                    </button>
                </div>
            </div>
        </aside>

        <!--Top header-->
       <header class="top-header">
            <div class="welcome-section">
                <h1 class="welcome-text" id="welcomeMessage">Welcome!</h1>
                <p class="date-time" id="currentDateTime"></p>
            </div>
       </header>

        <main class="main-content">
            <div class="content-header">
                <h1>Current Tasks:</h1>
                <button id="newTaskBtn" class="new-task-btn">+ New Task</button>
            </div>

            <!--Task list container-->
            <div id="taskList" class="task-list"></div>
        </main>

        <!-- Task Modal (same as before) -->
        <div id="taskModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <span id="closeModal" class="close">&times;</span>
                    <h2>Add Task</h2>
                </div>

                <div class="modal-body">
                    <form id="taskForm" class="task-form-grid">
                        <input type="hidden" id="taskId" name="taskId">

                        <div>
                            <label for="taskTitle">Task Name:</label>
                            <input type="text" id="taskTitle" name="title" required>
                        </div>

                        <div>
                            <label for="taskCategory">Category:</label>
                            <select id="taskCategory" name="category" required>
                                <option value="">--Select Category--</option>
                                <option value="Bills">Bills</option>
                                <option value="Groceries">Groceries</option>
                                <option value="Delivery">Delivery</option>
                                <option value="Others">Others</option>
                            </select>
                        </div>

                        <div class="full-width">
                            <label for="taskRemarks">Remarks (Optional):</label>
                            <textarea id="taskRemarks" name="remarks"></textarea>
                        </div>

                        <div>
                            <label for="taskOrigin">Point of Origin:</label>
                            <input type="text" id="taskOrigin" name="origin" placeholder="Your starting location" required>
                        </div>

                        <div>
                            <label for="taskDestination">Destination:</label>
                            <input type="text" id="taskDestination" name="destination" placeholder="Where you need to go" required>
                        </div>

                        <div>
                            <label for="taskDeadline">Deadline:</label>
                            <input type="date" id="taskDeadline" name="deadline" required>
                        </div>
                    </form>
                </div>

                <div class="modal-footer">
                    <button type="submit" form="taskForm" class="save-btn">Save Task</button>
                </div>
            </div>
        </div>

        <!-- Delete Confirmation Modal (same as before) -->
        <div id="deleteModal" class="modal">
            <div class="delete-modal-content">
                <div class="delete-modal-header">Confirm Delete</div>
                <div class="delete-modal-body">
                    <p>Are you sure you want to delete this task?</p>
                </div>
                <div class="delete-modal-footer">
                    <button id="cancelDeleteBtn" class="cancel-btn">Cancel</button>
                    <button id="confirmDeleteBtn" class="delete-btn">Delete</button>
                </div>
            </div>
        </div>
    
        <!-- Map Modal (same as before) -->
        <div id="mapModal" class="modal">
            <div class="modal-content map-modal-content">
                <div class="modal-header">
                    <span id="closeMapModal" class="close">&times;</span>
                    <h2>Plan Your Route</h2>
                </div>
                <div class="modal-body map-modal-body">
                    <div class="map-controls-container">
                        <div class="map-controls">
                            <div class="location-inputs">
                                <div class="input-group">
                                    <label for="originSearch">üìç Origin:</label>
                                    <div class="input-with-button">
                                        <input type="text" id="originSearch" placeholder="Enter origin address or click on map...">
                                        <div id="originAutocomplete" class="search-autocomplete"></div>
                                        <button id="useCurrentLocation" class="current-location-btn" title="Use Current Location">üìç</button>
                                    </div>
                                </div>
                                <div class="input-group">
                                    <label for="destinationSearch">üéØ Destination:</label>
                                    <div class="input-with-button">
                                        <input type="text" id="destinationSearch" placeholder="Enter destination address or click on map...">
                                        <div id="destinationAutocomplete" class="search-autocomplete"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="map-buttons">
                                <button id="searchLocations" class="search-btn">üîç Search Locations</button>
                                <button id="generateRoute" class="map-route-btn" disabled>üöó Generate Route</button>
                                <button id="saveRoute" class="map-save-btn" disabled>üíæ Save Route</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="map-and-route-container">
                        <div class="map-container">
                            <div id="routeMap" class="route-map"></div>
                        </div>
                        
                        <div class="route-info-container">
                            <div id="routeInfo" class="route-info" style="display: none;">
                                <h3>üìä Route Information</h3>
                                <div class="route-details">
                                    <div class="route-detail">
                                        <strong>Distance:</strong> 
                                        <span id="routeDistance">-</span>
                                    </div>
                                    <div class="route-detail">
                                        <strong>Estimated Time:</strong> 
                                        <span id="routeDuration">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>